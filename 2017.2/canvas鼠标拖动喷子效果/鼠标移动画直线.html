<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="canv" width="1000" height="1000" style="border: 1px solid"></canvas>
<script>
    var canvas = document.getElementById('canv');
    var ctx = canvas.getContext("2d");
//    ctx.beginPath();
//    ctx.lineWidth = 3;
    var oX,oY;
    var flag = false;
    function draw(sx,sy,ex,ey){
        ctx.clearRect(0,0,1000,1000);
        ctx.save();
         ctx.beginPath();
                ctx.moveTo(sx,sy);
                ctx.lineTo(ex,ey);

        ctx.lineWidth = 3;
            ctx.strokeStyle = randC();
            ctx.stroke();
//            ctx.closePath();
            ctx.restore();
    }

    canvas.onclick = function(e){

//        ctx.restore();
//        draw(oX,oY,e.pageX,e.pageY);
//        oX = e.pageX;
//        oY = e.pageY;


        if(!flag){
            oX = e.pageX;
            oY = e.pageY;
//            draw(oX,oY,e.pageX,e.pageY);
        }
        flag = !flag;
        canvas.onmousemove = function(e){

            if(flag){
                draw(oX,oY,e.pageX,e.pageY);

            }
        }
    }



    function randC(){
        return 'rgb(' + (~~(Math.random()*255)) + "," + (~~(Math.random()*255)) + "," + (~~(Math.random()*255)) + ")";
    }
</script>

</body>
</html>